{
  "info": {"name": "Auth - Registrar Usuario", "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},
  "item": [
    {
      "name": "Registrar Usuario",
      "event": [
        {"listen": "prerequest", "script": {"type": "text/javascript", "exec": [
          "if (!pm.environment.get('email')) { pm.environment.set('email', `user_${Date.now()}@example.com`); }",
          "if (!pm.environment.get('name')) { pm.environment.set('name', 'Tester'); }",
          "if (!pm.environment.get('password')) { pm.environment.set('password', 'Test1234!'); }"
        ]}},
        {"listen": "test", "script": {"type": "text/javascript", "exec": [
          "pm.test('status 201', () => pm.response.to.have.status(201));",
          "pm.test('json content-type', () => pm.response.to.have.header('Content-Type', /json/));",
          "const data = pm.response.json();",
          "pm.test('res has id,name,email', () => { pm.expect(data).to.have.property('id'); pm.expect(data).to.have.property('name'); pm.expect(data).to.have.property('email'); });"
        ]}}
      ],
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "body": {"mode": "raw", "raw": "{\n  \"name\": \"{{name}}\",\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\"\n}"},
        "url": {"raw": "{{baseUrl}}/api/auth/signup", "host": ["{{baseUrl}}"], "path": ["api","auth","signup"]}
      }
    }
  ]
}

