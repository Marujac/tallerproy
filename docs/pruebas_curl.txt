=== REGISTRAR USUARIO ===
Descripción: Prueba el endpoint de registro de usuarios en la API Next.js. Envía nombre, email y contraseña. Verifica que la respuesta incluya los datos básicos del usuario creado y que el servidor establezca la cookie de sesión (AUTH_TOKEN). Requiere que la app esté corriendo y conectada a MongoDB.
Comando:
curl -i -X POST "http://localhost:9002/api/auth/signup" \
  -H "Content-Type: application/json" \
  -c cookies.txt \
  --data '{"name":"Juan Perez","email":"juan@example.com","password":"Secure123!"}'
Respuesta Esperada:
HTTP/1.1 201 Created
{"id":"...","name":"Juan Perez","email":"juan@example.com"}

=== LOGIN USUARIO ===
Descripción: Valida credenciales y establece la cookie de sesión (AUTH_TOKEN). Guarda cookies en cookies.txt para usarlas en solicitudes posteriores autenticadas.
Comando:
curl -i -X POST "http://localhost:9002/api/auth/login" \
  -H "Content-Type: application/json" \
  -c cookies.txt -b cookies.txt \
  --data '{"email":"juan@example.com","password":"Secure123!"}'
Respuesta Esperada:
HTTP/1.1 200 OK
{"user":{"id":"...","name":"Juan Perez","email":"juan@example.com"}}

=== VERIFICAR TOKEN ===
Descripción: Consulta el usuario actual usando la cookie AUTH_TOKEN almacenada. Debe devolver el objeto user si la sesión es válida, o 401 si expiró.
Comando:
curl -i "http://localhost:9002/api/auth/me" -b cookies.txt
Respuesta Esperada:
HTTP/1.1 200 OK
{"user":{"id":"...","name":"Juan Perez","email":"juan@example.com"}}

=== ANALIZAR TEXTO ===
Descripción: Envía un texto (≥ 50 caracteres) para obtener una lista de falacias identificadas por el flujo de IA. No requiere autenticación.
Comando:
curl -i -X POST "http://localhost:9002/api/analyze" \
  -H "Content-Type: application/json" \
  --data '{"text":"Este es un texto de ejemplo suficientemente largo para probar el análisis automático de sesgos y falacias lógicas dentro de la aplicación."}'
Respuesta Esperada:
HTTP/1.1 200 OK
{"fallacies":[{"type":"...","passage":"...","explanation":"..."}]}

=== CREAR ENTRADA DE HISTORIAL ===
Descripción: Crea una entrada asociada al usuario autenticado con el texto analizado, puntuación y marca de tiempo. Requiere cookie AUTH_TOKEN de las operaciones de registro/login previas.
Comando:
curl -i -X POST "http://localhost:9002/api/history" \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  --data '{"text":"Texto analizado","fallacies":[],"questions":[],"score":0.8,"timestamp":1699999999999}'
Respuesta Esperada:
HTTP/1.1 201 Created
{"id":"..."}

=== LISTAR HISTORIAL ===
Descripción: Lista el historial del usuario autenticado, ordenado por fecha descendente. Útil para verificar inserciones recientes.
Comando:
curl -i "http://localhost:9002/api/history" -b cookies.txt
Respuesta Esperada:
HTTP/1.1 200 OK
[{"id":"...","text":"Texto analizado","score":0.8,"timestamp":1699999999999,"userId":"..."}, ...]

